{"stage" : {
        "name" : "Commit Phase",
        "type" : "ContinuousIntegration",
        "steps" : [
            {"step" : {
                "name" : "Build And UnitTest",
                "tasks" : [
                  {"task" : {
                              "name" : "Build And UnitTest",
                              "worker" : "maven",
                              "revisionNumber" : "env.BUILD_NUMBER",
                              "releaseType" : "SNAPSHOT",
                              "action" : "clean package",
                              "generateNewVersion" : "true"
                            }
                        },{"task" : {
                                "name" : "Archive Artifact",
                                "wfFunction" : "archive",
                                "worker" : "jenkinsArchiver",
                                "archiveResultsAs" : "**/target/*.war",
                                "excludeResultsAs" : "",
                                "resultType" : "artifacts",
                                "archiveWorker" : "ArtifactArchiver",
                                "fingerprint" : "true"
                              }
                        },
                        {"task" : {
                                "name" : "Archive Unit Test",
                                "wfFunction" : "archive",
                                "worker" : "jenkinsArchiver",
                                "archiveResultsAs" : "**/target/surefire-reports/TEST-*.xml",
                                "excludeResultsAs" : "",
                                "resultType" : "testResults",
                                "archiveWorker" : "JUnitResultArchiver"
                              }
                        }
                  ]
                }
              },
              {"step" : {
                    "name" : "Code Analisys",
                    "tasks" : []
                  }
              },
              {"step" : {
                    "name" : "Store Artifacts And Tests In Artifact Repository",
                    "tasks" : [
                        {"task" : {
                              "name" : "Tag Snapshot",
                              "worker" : "git",
                              "repo" : "git",
                              "repoURL" : "https://github.com:dcarbajosa/SpringHibernateExample.git",
                              "credentialsid" : "",
                              "tag" : "env.VERSION",
                              "tagComment" : "Snapshot from Jenkins Version: ${newVersion}"
                            }
                        }
                    ]
                }
              },
              {"step" : {
                    "name" : "Send Metrics",
                    "tasks" : []
                  }
              },
              {"step" : {
                    "name" : "Notify",
                    "tasks" : []
                  }
              }
        ]
    }
}
